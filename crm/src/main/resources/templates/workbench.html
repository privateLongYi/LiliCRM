<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>工作台</title>
    <link rel="stylesheet" type="text/css" th:href="@{/layui/css/layui.css}" />
    <style>
        .number{color: #01AAED; font-size: 30px;}
        .indexFont{font-size: 20px;}
        .css1 {
            width: 90%;
            height: 60px;
            background: #f1f5ff;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            margin-bottom: 8px;
            cursor: pointer;
        }
        .l_font{
            font-size: 12px;
            color: #333;
        }
        .r_font{
            font-size: 14px;
            color: #4f7afd;
        }
        input:hover{cursor: pointer;}
        body .demo-class .layui-layer-btn .layui-layer-btn1{
            border-color: #1E9FFF;
            background-color: #1E9FFF;
            color: #fff;
        }
        body .demo-class .layui-layer-btn .layui-layer-btn2{
            border-color: #1E9FFF;
            background-color: #1E9FFF;
            color: #fff;
        }
    </style>
</head>
<body bgcolor="#F0F0F0" style='overflow:scroll;overflow-x:hidden'>

    <br />
    <div class="layui-fluid">

        <!--快捷按钮-->
        <div class="layui-card layui-row" style="height: 100px;">
            <div class="layui-col-md3" align="center" style="margin-top: 5px;">
                <div id="insert" style="width: 65px; height: 65px; cursor: pointer;">
                    <img height="65px" width="65px" th:src="@{/images/insert.png}">
                </div>
                新增客户
            </div>
            <div class="layui-col-md3" align="center" style="margin-top: 5px;">
                <div id="appoint" style="width: 65px; height: 65px; cursor: pointer;">
                    <img height="65px" width="65px" th:src="@{/images/appoint.png}">
                </div>
                新增预约
            </div>
            <div class="layui-col-md3" align="center" style="margin-top: 5px;">
                <div id="success" style="width: 65px; height: 65px; cursor: pointer;">
                    <img height="65px" width="65px" th:src="@{/images/success.png}">
                </div>
                新增成交
            </div>
            <div class="layui-col-md3" align="center" style="margin-top: 5px;">
                <div id="refund" style="width: 65px; height: 65px; cursor: pointer;">
                    <img height="65px" width="65px" th:src="@{/images/refund.png}">
                </div>
                客户退款
            </div>
        </div>

        <!--销售简报-->
        <div class="layui-card">
            <div class="layui-card-header">
                <span style="font-size: 20px; font-weight: normal;">销售简报</span>
                <div style="float: right; margin-left: -20px; z-index: 99;" class="layui-inline">
                    <i class="layui-icon layui-icon-date" style="font-size: 20px;"></i>
                </div>
                <div style="float: right; margin-top: 7px;" class="layui-inline">
                    <input class="layui-input" id="bulletin" autocomplete="off" readonly
                           style="height: 28px; width: 170px; font-size: 10px;">
                </div>
            </div>
            <div class="layui-card-body layui-row">
                <!--新增-->
                <div class="layui-col-md4">
                    <span class="indexFont">新增</span>
                    <div class="layui-row">
                        <div class="layui-col-md3">
                            <div><span class="number" id="addAwaitContact"></span></div>
                            <span class="nb_b">待联系</span>
                        </div>
                        <div class="layui-col-md3">
                            <div><span class="number" id="addAwaitAppoint">3</span></div>
                            <span class="nb_b">待预约</span>
                        </div>
                        <div class="layui-col-md3">
                            <div><span class="number" id="addAppoint"></span></div>
                            <span class="nb_b">预约</span>
                        </div>
                        <div class="layui-col-md3">
                            <div><span class="number" id="addSuccess"></span></div>
                            <span class="nb_b">成交</span>
                        </div>
                    </div>
                </div>
                <!--成交-->
                <div class="layui-col-md4">
                    <span style="font-size: 20px; font-weight: normal;">成交</span>
                    <div class="layui-row">
                        <div class="layui-col-md4">
                            <div><span class="number" id="total"></span></div>
                            <span class="nb_b">成交数</span>
                        </div>
                        <div class="layui-col-md4">
                            <div><span class="number" id="totalMoney"></span></div>
                            <span class="nb_b">成交金额</span>
                        </div>
                        <div class="layui-col-md4">
                            <div><span class="number" id="payMoney"></span></div>
                            <span class="nb_b">实收金额</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--分块功能区-->
        <div class="layui-row layui-col-space10" style="background-color:#F0F0F0 ;">
            <div class="layui-col-md4">
                <div class="layui-card" style="height: 29.75rem;">
                    <div class="layui-card-header">
                        <span style="font-size: 20px; font-weight: normal;">待办客资</span>
                    </div>
                    <div class="layui-card-body">
                        <a th:href="@{/contact}">
                            <div class="css1">
                                <span class="l_font">待联系客户</span>
                                <span class="r_font" id="awaitContact"></span>
                            </div>
                        </a>
                        <a th:href="@{/appointment}">
                            <div class="css1">
                                <span class="l_font">待预约客户</span>
                                <span class="r_font" id="awaitAppoint"></span>
                            </div>
                        </a>
                        <a th:href="@{/awaitarrive}">
                            <div class="css1">
                                <span class="l_font">待到店客户</span>
                                <span class="r_font" id="awaitArrive"></span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <div class="layui-col-md4">
                <div class="layui-card" style="height: 29.75rem;" >
                    <div class="layui-card-header">
                        <span style="font-size: 20px; font-weight: normal;">销售目标</span>
                        <div style="float: right; margin-left: -20px; z-index: 99;" class="layui-inline">
                            <i class="layui-icon layui-icon-date" style="font-size: 20px;"></i>
                        </div>
                        <div style="float: right; margin-top: 7px;" class="layui-inline">
                            <input class="layui-input" id="target" autocomplete="off" readonly
                                   style="height: 28px; width: 170px; font-size: 10px;">
                        </div>
                    </div>
                    <div class="layui-card-body">
                        <div id="like" style="width: 100%;height:350px;"></div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md4">
                <div class="layui-card" style="height: 29.75rem;">
                    <div class="layui-card-header">
                        <span style="font-size: 20px; font-weight: normal;">业务概览</span>
                        <div style="float: right; margin-left: -20px; z-index: 99;" class="layui-inline">
                            <i class="layui-icon layui-icon-date" style="font-size: 20px;"></i>
                        </div>
                        <div style="float: right; margin-top: 7px;" class="layui-inline">
                            <input class="layui-input" id="business" autocomplete="off" readonly
                                   style="height: 28px; width: 170px; font-size: 10px;">
                        </div>
                    </div>
                    <div class="layui-card-body">
                        <div id="like2" style="width: 100%;height:350px;"></div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</body>
<script src="//cdn.bootcdn.net/ajax/libs/layui/2.4.3/layui.all.min.js"></script>
<!--统计图表JS-->
<script src="//cdn.bootcdn.net/ajax/libs/echarts/4.9.0-rc.1/echarts.min.js"></script>
<script type="text/javascript" th:src="@{/js/ld_vue.js}"></script>
<script type="text/javascript" th:src="@{/js/ld2_vue.js}"></script>
<script>

    var element = layui.element
        ,layer = layui.layer
        ,$ = layui.jquery
        ,laydate = layui.laydate

    //从sessionStorage中获取用户编号和角色名称
    var uId = sessionStorage.getItem('uId');
    var rName = sessionStorage.getItem('rName');

    //新增成交
    $("#success").click(function () {
        layer.open({
            type: 2, //层类型，iframe
            title: '新增成交',
            content: ['/indexGoSuccessSave'],
            area: ['500px', '450px'],
            resize: false,
            btn: '确定',
            btn1: function (index, layero) {
                var body = layer.getChildFrame('body', index);
                //获取值
                var cId = $(body).find("#cId").val();
                var clId = $(body).find("#clId").val();
                var sAId = $(body).find("#sAId").val();
                var sHId = $(body).find("#sHId").val();
                var sMessage = $(body).find("#sMessage").val();
                var sSum = $(body).find("#sSum").val();
                var sPaysum = $(body).find("#sPaysum").val();
                var sRemark = $(body).find("#sRemark").val();
                if (sAId != '' && sHId != '' && sSum != '' && sSum.trim() != '' && sPaysum != '' && sPaysum.trim() != '') {
                    //声明格式是否正确
                    var verify = true;
                    //验证成交金额
                    if (isNaN(sSum)){
                        layer.msg("成交金额格式错误");
                        verify = false;
                        return;
                    }
                    if(sSum <= 0){
                        layer.msg("成交金额不能小于等于零");
                        verify = false;
                        return;
                    }
                    //验证支付金额
                    if (isNaN(sPaysum)){
                        layer.msg("支付金额格式错误");
                        verify = false;
                        return;
                    }
                    if(sPaysum <= 0){
                        layer.msg("成交金额不能小于等于零");
                        verify = false;
                        return;
                    } else {
                        if(parseFloat(sPaysum) > parseFloat(sSum)){
                            layer.msg("支付金额不能大于成交金额");
                            verify = false;
                            return;
                        }
                    }
                    if(verify) {
                        $.post("/success/saveSuccess", {
                                uId: uId,
                                cId: cId,
                                clId: clId,
                                sAId: sAId,
                                clId: clId,
                                sAId: sAId,
                                sHId: sHId,
                                sMessage: sMessage,
                                sSum: sSum.trim(),
                                sPaysum: sPaysum.trim(),
                                sRemark: sRemark
                            },
                            function (obj) {
                                layer.msg(obj.msg, {time: 500}, function () {
                                    layer.close(index);
                                    location.reload();
                                });
                            }
                        );
                    }
                } else {
                    layer.msg('请填写带星号的必填项');
                }
            },
            cancel: function(index, layero){
                layer.close(index);
            }
        });
    });

    //客户退款
    $("#refund").click(function () {
        layer.open({
            type: 2, //层类型，iframe
            title: '客户退款',
            content: ['/indexGoPayrecordSave'],
            area: ['500px', '450px'],
            resize: false,
            btn: '确定',
            btn1: function (index, layero) {
                var body = layer.getChildFrame('body', index);
                //获取值
                var paySId = $(body).find("#paySId").val();
                var paySum = $(body).find("#paySum").val();
                var payTypeId = $(body).find("#payTypeId").val();
                if (paySId != '' && paySum != '' && paySum.trim() != '') {
                    //声明格式是否正确
                    var verify = true;
                    //验证成交金额
                    if(paySum <= 0){
                        layer.msg("退款金额不能小于等于零");
                        verify = false;
                        return;
                    }
                    if(verify) {
                        $.post("/payrecord/savePayrecord",
                            {uId: uId, paySId: paySId, paySum: paySum, payTypeId: payTypeId},
                            function (obj) {
                                layer.msg(obj.msg, {time: 500}, function () {
                                    layer.close(index);
                                    location.reload();
                                });
                            }
                        );
                    }
                } else {
                    layer.msg('请填写带星号的必填项');
                }
            },
            cancel: function(index, layero){
                layer.close(index);
            }
        });
    });

    //保存客户
    function saveCustomer(index) {
        var body = layer.getChildFrame('body', index);
        //获取值
        var cName = $(body).find("#cName").val();
        var cSex = null;
        if ($(body).find("[name=cSex]")[0].checked) {
            cSex = $(body).find("[name=cSex]")[0].value;
        } else {
            cSex = $(body).find("[name=cSex]")[1].value;
        }
        var cAge = $(body).find("#cAge").val();
        var cTel = $(body).find("#cTel").val();
        var clProject = $(body).find("#clProject").val();
        var clRemark = $(body).find("#clRemark").val();
        var clMessage = $(body).find("#clMessage").val();
        var clEarnest = $(body).find("#clEarnest").val();
        var clUId = $(body).find("#clUId").val();
        var clSource = $(body).find("#clSource").val();
        var clTypeId = $(body).find("#clTypeId").val();
        var clPlaceTime = $(body).find("#clPlaceTime").val();
        if (cName != '' && cName.trim() != '' && cTel != '' && cTel.trim() != '' && clPlaceTime != '') {
            //声明格式是否正确
            var verify = true;
            //验证姓名格式
            if (cName.length > 6) {
                layer.msg("姓名长度不能大于6位");
                verify = false;
                return;
            }
            //验证年龄格式
            if (cAge != '') {
                if (cAge <= 0 || cAge >= 150) {
                    layer.msg("年龄必须大于0小于150");
                    verify = false;
                    return;
                }
            }
            //验证电话格式
            if (!(/^1[3456789]\d{9}$/.test(cTel))) {
                layer.msg("手机号码格式错误");
                verify = false;
                return;
            }
            //验证定金格式
            if (clEarnest != '') {
                if (clEarnest < 0) {
                    layer.msg("定金不能为负数");
                    verify = false;
                    return;
                }
            }
            if (verify) {
                $.ajax({
                    type: "POST",
                    async: false,
                    url: "/customer/saveCustomer",
                    data: {
                        uId: uId,
                        cName: cName.trim(),
                        cSex: cSex,
                        cAge: cAge,
                        cTel: cTel.trim(),
                        clProject: clProject,
                        clMessage: clMessage,
                        clRemark: clRemark,
                        clEarnest: clEarnest,
                        clUId: clUId,
                        clSource: clSource,
                        clTypeId: clTypeId,
                        clPlaceTime: clPlaceTime
                    },
                    success: function (obj) {
                        layer.close(index);
                    }
                });
            }
        } else {
            layer.msg('请输入带星号的必填项');
        }
    }

    //保存预约
    function saveAppoint(index) {
        var body = layer.getChildFrame('body', index);
        //获取值
        var aClId = $(body).find("#aClId").val();
        var aTime = $(body).find("#aTime").val();
        var aHId = $(body).find("#aHId").val();
        var atType = $(body).find("#atType").val();
        if (aTime != '') {
            $.ajax({
                type: "POST",
                async: false,
                url: "/appointment/saveAppointment",
                data: {
                    uId: uId, aClId: aClId, aTime: aTime,
                    aHId: aHId, atType: atType
                },
                success: function (obj) {
                    layer.close(index);
                }
            });
        } else {
            layer.msg('请输入预约时间');
        }
    }

    //新增客户
    $("#insert").click(function () {
        layer.open({
            type: 2, //层类型，iframe
            title: '新增客户',
            content: ['/customer/customersave'],
            area: ['1000px', '500px'],
            skin: 'demo-class',
            resize: false,
            btn: ['继续预约', '确定新增'],
            btn1: function (index, layero) {
                saveCustomer(index);
                //获取最新的线索
                $.ajax({
                    type: "GET",
                    async: false,
                    url: "/clue/queryNewClue",
                    success: function (data) {
                        //弹出预约页面
                        layer.open({
                            type: 2, //层类型，iframe
                            title: '新增预约',
                            content: ['/appointmentsave?clId='+data.data.clId+'&cName='+data.data.cName+'&atType=普通预约'],
                            area: ['450px', '450px'],
                            skin: 'demo-class',
                            resize: false,
                            btn: ['继续成交', '确定预约'],
                            btn1: function (index, layero) {
                                saveAppoint(index);
                                //获取最大的编号
                                $.ajax({
                                    type: "GET",
                                    async: false,
                                    url: "/appointment/queryNewAppoint",
                                    success: function (data2) {
                                        //弹出成交页面
                                        layer.open({
                                            type: 2, //层类型，iframe
                                            title: '新增成交客户',
                                            content: ['/successsave?cId='+data2.data.cId+'&clId='+data2.data.clId+
                                            '&sAId='+data2.data.aId+'&cName='+data2.data.cName+'&hId='+data2.data.aHId+
                                            '&hName='+data2.data.hName],
                                            area: ['500px', '450px'],
                                            resize: false,
                                            btn: '确定',
                                            btn1: function (index, layero) {
                                                var body = layer.getChildFrame('body', index);
                                                //获取值
                                                var cId = $(body).find("#clId").val();
                                                var clId = $(body).find("#clId").val();
                                                var sAId = $(body).find("#sAId").val();
                                                var sHId = $(body).find("#sHId").val();
                                                var sMessage = $(body).find("#sMessage").val();
                                                var sSum = $(body).find("#sSum").val();
                                                var sPaysum = $(body).find("#sPaysum").val();
                                                var sRemark = $(body).find("#sRemark").val();
                                                if (sSum != '' && sSum.trim() != '' && sPaysum != '' && sPaysum.trim() != '') {
                                                    //声明格式是否正确
                                                    var verify = true;
                                                    //验证成交金额
                                                    if (isNaN(sSum)){
                                                        layer.msg("成交金额格式错误");
                                                        verify = false;
                                                        return;
                                                    }
                                                    if(sSum <= 0){
                                                        layer.msg("成交金额不能小于等于零");
                                                        verify = false;
                                                        return;
                                                    }
                                                    //验证支付金额
                                                    if (isNaN(sPaysum)){
                                                        layer.msg("支付金额格式错误");
                                                        verify = false;
                                                        return;
                                                    }
                                                    if(sPaysum <= 0){
                                                        layer.msg("成交金额不能小于等于零");
                                                        verify = false;
                                                        return;
                                                    } else {
                                                        if(parseFloat(sPaysum) > parseFloat(sSum)){
                                                            layer.msg("支付金额不能大于成交金额");
                                                            verify = false;
                                                            return;
                                                        }
                                                    }
                                                    if(verify) {
                                                        $.ajax({
                                                            type: "POST",
                                                            async: false,
                                                            url: "/success/saveSuccess",
                                                            data: {
                                                                uId: uId,
                                                                cId: cId,
                                                                clId: clId,
                                                                sAId: sAId,
                                                                sHId: sHId,
                                                                sMessage: sMessage,
                                                                sSum: sSum.trim(),
                                                                sPaysum: sPaysum.trim(),
                                                                sRemark: sRemark
                                                            },
                                                            success: function (obj) {
                                                                layer.msg(obj.msg, {time: 500}, function () {
                                                                    layer.close(index);
                                                                    location.reload();
                                                                });
                                                            }
                                                        });
                                                    }
                                                } else {
                                                    layer.msg('请填写带星号的必填项');
                                                }
                                            },
                                            cancel: function(index, layero){
                                                layer.close(index);
                                            }
                                        });
                                    }
                                })
                            },
                            btn2: function (index, layero) {
                                saveAppoint(index);
                                location.reload();
                            },
                            cancel: function(index, layero){
                                layer.close(index);
                            }
                        });
                    }
                })
            },
            btn2: function (index, layero) {
                saveCustomer(index);
                location.reload();
            },
            cancel: function (index, layero) {
                layer.close(index);
            }
        });
    });
    
    //新增预约
    $("#appoint").click(function () {
        layer.open({
            type: 2, //层类型，iframe
            title: '新增预约客户',
            content: ['/indexGoAppointSave'],
            area: ['450px', '450px'],
            skin: 'demo-class',
            resize: false,
            btn: ['继续成交', '确定预约'],
            btn1: function (index, layero) {
                saveAppoint(index);
                //获取最大的编号
                $.ajax({
                    type: "GET",
                    async: false,
                    url: "/appointment/queryNewAppoint",
                    success: function (data) {
                        //弹出成交页面
                        layer.open({
                            type: 2, //层类型，iframe
                            title: '新增成交客户',
                            content: ['/successsave?cId=' + data.data.cId + '&clId=' + data.data.clId +
                            '&sAId=' + data.data.aId + '&cName=' + data.data.cName + '&hId=' + data.data.aHId +
                            '&hName=' + data.data.hName],
                            area: ['500px', '450px'],
                            resize: false,
                            btn: '确定',
                            btn1: function (index, layero) {
                                var body = layer.getChildFrame('body', index);
                                //获取值
                                var cId = $(body).find("#clId").val();
                                var clId = $(body).find("#clId").val();
                                var sAId = $(body).find("#sAId").val();
                                var sHId = $(body).find("#sHId").val();
                                var sMessage = $(body).find("#sMessage").val();
                                var sSum = $(body).find("#sSum").val();
                                var sPaysum = $(body).find("#sPaysum").val();
                                var sRemark = $(body).find("#sRemark").val();
                                if (sSum != '' && sSum.trim() != '' && sPaysum != '' && sPaysum.trim() != '') {
                                    //声明格式是否正确
                                    var verify = true;
                                    //验证成交金额
                                    if (isNaN(sSum)) {
                                        layer.msg("成交金额格式错误");
                                        verify = false;
                                        return;
                                    }
                                    if (sSum <= 0) {
                                        layer.msg("成交金额不能小于等于零");
                                        verify = false;
                                        return;
                                    }
                                    //验证支付金额
                                    if (isNaN(sPaysum)) {
                                        layer.msg("支付金额格式错误");
                                        verify = false;
                                        return;
                                    }
                                    if (sPaysum <= 0) {
                                        layer.msg("成交金额不能小于等于零");
                                        verify = false;
                                        return;
                                    } else {
                                        if (parseFloat(sPaysum) > parseFloat(sSum)) {
                                            layer.msg("支付金额不能大于成交金额");
                                            verify = false;
                                            return;
                                        }
                                    }
                                    if (verify) {
                                        $.ajax({
                                            type: "POST",
                                            async: false,
                                            url: "/success/saveSuccess",
                                            data: {
                                                uId: uId,
                                                cId: cId,
                                                clId: clId,
                                                sAId: sAId,
                                                sHId: sHId,
                                                sMessage: sMessage,
                                                sSum: sSum.trim(),
                                                sPaysum: sPaysum.trim(),
                                                sRemark: sRemark
                                            },
                                            success: function (obj) {
                                                layer.msg(obj.msg, {time: 500}, function () {
                                                    layer.close(index);
                                                    location.reload();
                                                });
                                            }
                                        });
                                    }
                                } else {
                                    layer.msg('请填写带星号的必填项');
                                }
                            },
                            cancel: function (index, layero) {
                                layer.close(index);
                            }
                        });
                    }
                })
            },
            btn2: function (index, layero) {
                saveAppoint(index);
                location.reload();
            },
            cancel: function(index, layero){
                layer.close(index);
            }
        });
    });

    //给筛选条件赋值（默认本月）
    var date = new Date();
    var begin = date.getFullYear()+"-"+eval(date.getMonth()+1)+"-01";
    var end = date.getFullYear()+"-"+eval(date.getMonth()+1)+"-"+date.getDate();
    var time = begin + " - " + end;
    $("input").val(time);

    //onload事件
    $(function () {
        //销售简报
        bulletin(begin, end);
        //待办客资
        await();
    })

    //销售简报加载事件
    function bulletin(begin, end) {
        //查询待联系总数并赋值
        $.get('/customer/queryCByUIdAndTimeAndCTypeId',
            {uId:uId, ctType:'待联系', beginTime:begin, endTime:end},
            function (data) {
                $("#addAwaitContact").html(data.data);
            }
        );
        //查询待预约总数并赋值
        $.get('/customer/queryCByUIdAndTimeAndCTypeId',
            {uId:uId, ctType:'待预约', beginTime:begin, endTime:end},
            function (data) {
                $("#addAwaitAppoint").html(data.data);
            }
        );
        //查询待待到店总数并赋值
        $.get('/customer/queryAByUIdAndTime',
            {uId:uId, beginTime:begin, endTime:end},
            function (data) {
                $("#addAppoint").html(data.data);
            }
        );
        //查询成交总数并赋值
        $.get('/success/querySByUIdAndTime',
            {uId:uId, beginTime:begin, endTime:end},
            function (data) {
                $("#addSuccess").html(data.data);
                $("#total").html(data.data);
            }
        );
        //查询成交总金额并赋值
        $.get('/success/querySSumByUIdAndTime',
            {uId:uId, beginTime:begin, endTime:end},
            function (data) {
                $("#totalMoney").html(data.data);
            }
        );
        //查询成交收款总金额并赋值
        $.get('/success/querySPaysumByUIdAndTime',
            {uId:uId, beginTime:begin, endTime:end},
            function (data) {
                $("#payMoney").html(data.data);
            }
        );
    }

    //待办客资加载事件
    function await() {
        //查询待联系总数并赋值
        $.get('/customer/queryCByUIdAndTimeAndCTypeId',
            {uId:uId, ctType:'待联系'},
            function (data) {
                $("#awaitContact").html(data.data);
            }
        );
        //查询待预约总数并赋值
        $.get('/customer/queryCByUIdAndTimeAndCTypeId',
            {uId:uId, ctType:'待预约'},
            function (data) {
                $("#awaitAppoint").html(data.data);
            }
        );
        //查询待待到店总数并赋值
        $.get('/customer/queryCByUIdAndTimeAndCTypeId',
            {uId:uId, ctType:'待到店'},
            function (data) {
                $("#awaitArrive").html(data.data);
            }
        );
    }

    //销售简报
    laydate.render({
        elem: '#bulletin' //指定元素
        ,trigger: 'click' //采用click弹出
        ,range: true //范围选择
        ,max: 0 //最大值为今天
        ,btns: ['confirm'] //右下角显示按钮
        ,done: function(value){ //控件选择完毕后的回调
            var begin = value.substring(0, 10);
            var end = value.substring(13, 23);
            bulletin(begin, end);
        }
    });

    //销售目标
    laydate.render({
        elem: '#target' //指定元素
        ,trigger: 'click' //采用click弹出
        ,range: true //范围选择
        ,max: 0 //最大值为今天
        ,btns: ['confirm'] //右下角显示按钮
    });

    //业务概览
    laydate.render({
        elem: '#business ' //指定元素
        ,trigger: 'click' //采用click弹出
        ,range: true //范围选择
        ,max: 0 //最大值为今天
        ,btns: ['confirm'] //右下角显示按钮
    });

    /*
    //根据用户编号和状态查询待联系客户总条数
    $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=待联系", function (data){
        //赋值
        $("#awaitcontact").html(data);
    });

    //根据用户编号和状态查询待预约客户总条数
    $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=待预约", function (data){
        //赋值
        $("#awaitappoint").html(data);
    });

    //根据用户编号和状态查询待预约客户总条数
    $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=待到店", function (data){
        //赋值
        $("#awaitarrive").html(data);
    });

    //根据用户编号和状态查询未成交客户总条数
    $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=未成交", function (data){
        //赋值
        $("#fail").html(data);
    });

    //根据用户编号和状态查询成交客户总条数
    $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=成交", function (data){
        //赋值
        $("#success").html(data);
    });

    //获取客户到店率
    $.get("/statistics/arrivePercent?uId="+uId, function (data) {
        //赋值
        $(".layui-bg-red").attr("lay-percent", data);
        element.init();
        element.progress('arrive', data);
    });

    //获取到店成交率
    $.get("/statistics/successPercent?uId="+uId, function (data) {
        //赋值
        $(".layui-bg-green").attr("lay-percent", data);
        element.init();
        element.progress('success', data);
    });

    //获取目标业绩完成度
    $.get("/statistics/performance?uId="+uId, function (data) {
        //赋值
        $(".layui-bg-blue").attr("lay-percent", data);
        element.init();
        element.progress('performance', data);
    });
*/

</script>

</html>
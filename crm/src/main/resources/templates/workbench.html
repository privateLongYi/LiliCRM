<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>工作台</title>
    <link rel="stylesheet" type="text/css" th:href="@{/layui/css/layui.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/job.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}" />
</head>
<body bgcolor="#F0F0F0">

<!--全局栅格布局div-->
<div class="layui-row layui-col-space10 all_div">
        <!--左侧工作台div-->
        <div class="layui-col-md8">
            <!--顶部快捷键卡片面版div-->
            <div class="panel_box row layui-card">
                <!--卡片面版header div-->
                <div class="layui-card-header">&nbsp;&nbsp;&nbsp;快捷菜单</div>
                <!--卡片面版bpdy div-->
                <div class="layui-card-body">
                    <!--待联系客户button-->
                    <div class="panel col">
                        <a href="javascript:skip('contact');">
                            <div class="panel_icon">
                                <i class="layui-icon" data-icon="&#xe63a;">&#xe613;</i>
                            </div>
                            <div class="panel_word">
                                <span id="awaitcontact"></span>
                                <cite>待联系客户</cite>
                            </div>
                        </a>
                    </div>
                    <!--待预约客户button-->
                    <div class="panel col">
                        <a href="javascript:skip('appointment');">
                            <div class="panel_icon" style="background-color:#009688;">
                                <i class="layui-icon" data-icon="&#xe613;">&#xe613;</i>
                            </div>
                            <div class="panel_word">
                                <span id="awaitappoint"></span>
                                <cite>待预约客户</cite>
                            </div>
                        </a>
                    </div>
                    <!--待到店客户button-->
                    <div class="panel col">
                        <a href="javascript:skip('awaitarrive');">
                            <div class="panel_icon" style="background-color:#5FB878;">
                                <i class="layui-icon" data-icon="&#xe64a;">&#xe613;</i>
                            </div>
                            <div class="panel_word">
                                <span id="awaitarrive"></span>
                                <cite>待到店客户</cite>
                            </div>
                        </a>
                    </div>
                    <!--未成交客户button-->
                    <div class="panel col">
                        <a href="javascript:skip('fail');">
                            <div class="panel_icon" style="background-color:#5FB878;">
                                <i class="layui-icon" data-icon="&#xe64a;">&#xe613;</i>
                            </div>
                            <div class="panel_word">
                                <span id="fail"></span>
                                <cite>未成交客户</cite>
                            </div>
                        </a>
                    </div>
                    <!--成交客户button-->
                    <div class="panel col">
                        <a href="javascript:skip('success');">
                            <div class="panel_icon" style="background-color:#5FB878;">
                                <i class="layui-icon" data-icon="&#xe64a;">&#xe613;</i>
                            </div>
                            <div class="panel_word">
                                <span id="success"></span>
                                <cite>成交客户</cite>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
            <!--仪表盘div-->
            <div style="margin-top:10px;">
                <!--仪表盘卡片面版div-->
                <div class="layui-card">
                    <!--head卡片-->
                    <div class="layui-card-header">工作仪表盘</div>
                    <!--body卡片-->
                    <div class="layui-card-body layui-row layui-col-space10">
                        <div class="layui-col-md6" id="main" style="width: 480px;height:350px;"></div>
                        <div class="layui-col-md6" id="like" style="width: 480px;height:350px;"></div>
                    </div>
                </div>
            </div>
        </div>
        <!--右侧工作台-->
        <div class="layui-col-md4">
            <!--卡片面板div-->
            <div class="layui-card">
                <!--head卡片-->
                <div class="layui-card-header">效果报告</div>
                <!--body卡片-->
                <div class="layui-card-body">
                    <ul class="layui-timeline">
                        <li class="layui-timeline-item">
                            <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                            <div class="layui-timeline-content layui-text">
                                <h3 class="layui-timeline-title">客户到店率</h3><br />
                                <div class="layui-progress" lay-showPercent="yes" lay-filter="arrive">
                                    <div class="layui-progress-bar layui-bg-red" lay-percent="0.0%"></div>
                                </div><br />
                            </div>
                        </li>
                        <li class="layui-timeline-item">
                            <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                            <div class="layui-timeline-content layui-text">
                                <h3 class="layui-timeline-title">到店成交率</h3><br />
                                <div class="layui-progress" lay-showPercent="yes" lay-filter="success">
                                    <div class="layui-progress-bar layui-bg-green" lay-percent="0.0%"></div>
                                </div><br />
                            </div>
                        </li>
                        <li class="layui-timeline-item">
                            <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                            <div class="layui-timeline-content layui-text">
                                <h3 class="layui-timeline-title">目标业绩完成度</h3><br />
                                <div class="layui-progress" lay-showPercent="true" lay-filter="performance">
                                    <div class="layui-progress-bar layui-bg-blue" lay-percent="0/1000000"></div>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <br /><br /><br /><br /><br /><br /><br />
                    <br /><br /><br /><br /><br /><br /><br />
                    <br /><br /><br /><br /><br />

                </div>
            </div>
        </div>
    </div>

</body>

<script src="//cdn.bootcdn.net/ajax/libs/layui/2.4.3/layui.all.min.js"></script>
<!--<script th:src="@{/layui/layui.all.js}"></script>-->
<!--统计图表JS-->
<script src="//cdn.bootcdn.net/ajax/libs/echarts/2.1.10/echarts-all.js"></script>
<script type="text/javascript" th:src="@{/js/vue_test.js}"></script>
<script type="text/javascript" th:src="@{/js/vue_t.js}"></script>
<script>

    //跳转页面
    function skip(id) {
        top.document.getElementById("frame").src=id;
    }

    //注意进度条依赖 element 模块，否则无法进行正常渲染和功能性操作
    layui.use('element', function() {
        var element = layui.element;
        var $ = layui.jquery;

        //从sessionStorage中获取用户编号和角色名称
        var uId = sessionStorage.getItem('uId');
        var rName = sessionStorage.getItem('rName');

        //根据用户编号和状态查询待联系客户总条数
        $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=待联系", function (data){
            //赋值
            $("#awaitcontact").html(data);
        });

        //根据用户编号和状态查询待预约客户总条数
        $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=待预约", function (data){
            //赋值
            $("#awaitappoint").html(data);
        });

        //根据用户编号和状态查询待预约客户总条数
        $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=待到店", function (data){
            //赋值
            $("#awaitarrive").html(data);
        });

        //根据用户编号和状态查询未成交客户总条数
        $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=未成交", function (data){
            //赋值
            $("#fail").html(data);
        });

        //根据用户编号和状态查询成交客户总条数
        $.get("/customer/getTotalCByUIdAndCTypeId?uId="+uId+"&ctType=成交", function (data){
            //赋值
            $("#success").html(data);
        });

        //获取客户到店率
        $.get("/statistics/arrivePercent?uId="+uId, function (data) {
            //赋值
            $(".layui-bg-red").attr("lay-percent", data);
            element.init();
            element.progress('arrive', data);
        });

        //获取到店成交率
        $.get("/statistics/successPercent?uId="+uId, function (data) {
            //赋值
            $(".layui-bg-green").attr("lay-percent", data);
            element.init();
            element.progress('success', data);
        });

        //获取目标业绩完成度
        $.get("/statistics/performance?uId="+uId, function (data) {
            //赋值
            $(".layui-bg-blue").attr("lay-percent", data);
            element.init();
            element.progress('performance', data);
        });

    });
</script>

</html>